ğŸš€ Starting Webhook Simulation...
ğŸ”‘ Fetching auth tokens...
ğŸ‘¤ Fetching customers...
âŒ No customer found to simulate order for. Response: {"errors":[{"message":"Cannot query field \"customers\" on type \"Query\".","locations":[{"line":3,"column":5}],"extensions":{"code":"GRAPHQL_VALIDATION_FAILED"}}]}
ğŸš€ Starting Webhook Simulation...
ğŸ”‘ Fetching auth tokens...
ğŸ‘¤ Fetching customers...
âŒ No customer found to simulate order for. Response: {"errors":[{"message":"Cannot query field \"customers\" on type \"Query\".","locations":[{"line":3,"column":5}],"extensions":{"code":"GRAPHQL_VALIDATION_FAILED"}}]}
ğŸš€ Starting Webhook Simulation...
ğŸ”‘ Fetching auth tokens...
ğŸ‘¤ Fetching customers...
âŒ No customer found to simulate order for. Response: {"errors":[{"message":"Unknown argument \"limit\" on field \"Query.listCustomer\".","locations":[{"line":3,"column":18}],"extensions":{"code":"GRAPHQL_VALIDATION_FAILED"}},{"message":"Cannot query field \"key\" on type \"CustomerAttributeValue\".","locations":[{"line":11,"column":13}],"extensions":{"code":"GRAPHQL_VALIDATION_FAILED"}}]}
ğŸš€ Starting Webhook Simulation...
ğŸ”‘ Fetching auth tokens...
ğŸ‘¤ Fetching customers...
ğŸ‘¤ Simulating order for: Loyalty (4446e914-b636-4601-85e1-f9dec6635b7e)
ğŸ” Generated Signature: /LTcWtrgNG...
ğŸ“¡ Sending webhook request...
âŒ Webhook Request Failed: {
  "success": false,
  "status": 500,
  "data": {
    "error": "Customer not found"
  },
  "message": "Request failed with status code 500"
}
ğŸš€ Starting Webhook Simulation...
ğŸ”‘ Fetching auth tokens...
ğŸ‘¤ Fetching customers...
ğŸ‘¤ Simulating order for: Loyalty (4446e914-b636-4601-85e1-f9dec6635b7e)
ğŸ” Generated Signature: VdGVl+BF6K...
ğŸ“¡ Sending webhook request...
âŒ Webhook Request Failed: {
  "success": false,
  "status": 500,
  "data": {
    "error": "Customer not found"
  },
  "message": "Request failed with status code 500"
}
ğŸš€ Starting Webhook Simulation...
ğŸ”‘ Fetching auth tokens...
ğŸ‘¤ Fetching customers...
ğŸ‘¤ Simulating order for: Loyalty (4446e914-b636-4601-85e1-f9dec6635b7e)
ğŸ” Generated Signature: XCmgKeCQC2...
ğŸ“¡ Sending webhook request...
âŒ Webhook Request Failed: {
  "success": false,
  "status": 500,
  "data": {
    "error": "Customer not found"
  },
  "message": "Request failed with status code 500"
}
ğŸš€ Starting Webhook Simulation...
ğŸ”‘ Fetching auth tokens...
ğŸ‘¤ Fetching customers...
ğŸ‘¤ Simulating order for: Loyalty (4446e914-b636-4601-85e1-f9dec6635b7e)
ğŸ” Generated Signature: aJNYYdsRtr...
ğŸ“¡ Sending webhook request...
âŒ Webhook Request Failed: {
  "success": false,
  "status": 500,
  "data": "<!DOCTYPE html><html><head><meta charSet=\"utf-8\" data-next-head=\"\"/><meta name=\"viewport\" content=\"width=device-width\" data-next-head=\"\"/><style data-next-hide-fouc=\"true\">body{display:none}</style><noscript data-next-hide-fouc=\"true\"><style>body{display:block}</style></noscript><noscript data-n-css=\"\"></noscript><script defer=\"\" noModule=\"\" src=\"/_next/static/chunks/polyfills.js\"></script><script src=\"/_next/static/chunks/fallback/webpack.js\" defer=\"\"></script><script src=\"/_next/static/chunks/fallback/main.js\" defer=\"\"></script><script src=\"/_next/static/chunks/fallback/pages/_app.js\" defer=\"\"></script><script src=\"/_next/static/chunks/fallback/pages/_error.js\" defer=\"\"></script><noscript id=\"__next_css__DO_NOT_USE__\"></noscript></head><body><div id=\"__next\"></div><script src=\"/_next/static/chunks/fallback/react-refresh.js\"></script><script id=\"__NEXT_DATA__\" type=\"application/json\">{\"props\":{\"pageProps\":{\"statusCode\":500,\"hostname\":\"localhost\"}},\"page\":\"/_error\",\"query\":{},\"buildId\":\"development\",\"isFallback\":false,\"err\":{\"name\":\"ModuleBuildError\",\"source\":\"server\",\"message\":\"Module build failed (from ./node_modules/next/dist/build/webpack/loaders/next-swc-loader.js):\\nError:   Ã— Expected ';', '}' or \\u003ceof\\u003e\\n    â•­â”€[C:\\\\Users\\\\Administrator\\\\Desktop\\\\Ä°kas\\\\my-admin-app\\\\src\\\\lib\\\\loyalty\\\\attributes.ts:1:1]\\n  1 â”‚ â•­â”€â–¶ ```typescript\\n  2 â”‚ â”‚   import { ikasAdminGraphQLAPIClient } from '../ikas-client/generated/graphql';\\n  3 â”‚ â”‚   import { GET_CUSTOMER_LOYALTY_DATA, UPDATE_CUSTOMER_TAGS } from '../graphql/loyalty';\\n  4 â”‚ â”‚   import { LoyaltyProfile } from './types';\\n  5 â”‚ â”‚   \\n  6 â”‚ â”‚   // Tag Prefixes\\n  7 â”‚ â”‚   const TAG_PREFIX_POINTS = \\\"Loyalty:Points:\\\";\\n  8 â”‚ â”‚   const TAG_PREFIX_TIER = \\\"Loyalty:Tier:\\\";\\n  9 â”‚ â”‚   \\n 10 â”‚ â”‚   function parseTags(customerId: string, tags: string[]): LoyaltyProfile {\\n 11 â”‚ â”‚       let points = 0;\\n 12 â”‚ â”‚       let tier = 'Standard';\\n 13 â”‚ â”‚   \\n 14 â”‚ â”‚       for (const tag of tags) {\\n 15 â”‚ â”‚           if (tag.startsWith(TAG_PREFIX_POINTS)) {\\n 16 â”‚ â”‚               points = parseInt(tag.replace(TAG_PREFIX_POINTS, ''), 10) || 0;\\n 17 â”‚ â”‚           } else if (tag.startsWith(TAG_PREFIX_TIER)) {\\n 18 â”‚ â”‚               tier = tag.replace(TAG_PREFIX_TIER, '');\\n 19 â”‚ â”‚           }\\n 20 â”‚ â”‚       }\\n 21 â”‚ â”‚   \\n 22 â”‚ â”‚       return {\\n 23 â”‚ â”‚           customerId,\\n 24 â”‚ â”‚           pointsBalance: points,\\n 25 â”‚ â”‚           tier: tier as LoyaltyProfile['tier'],\\n 26 â”‚ â”‚           lifetimePoints: 0, // Not storing lifetime in tags for simplicity initially\\n 27 â”‚ â”‚           referralCode: undefined, // Skipping\\n 28 â”‚ â”‚           pointsExpirationDate: undefined,\\n 29 â”‚ â”‚       };\\n 30 â”‚ â”‚   }\\n 31 â”‚ â”‚   \\n 32 â”‚ â”‚   export async function getLoyaltyProfile(\\n 33 â”‚ â”‚       client: ikasAdminGraphQLAPIClient\\u003cany\\u003e,\\n 34 â”‚ â”‚       customerId: string\\n 35 â”‚ â”‚   ): Promise\\u003cLoyaltyProfile | null\\u003e {\\n 36 â”‚ â”‚       const query = GET_CUSTOMER_LOYALTY_DATA;\\n 37 â”‚ â”‚       try {\\n 38 â”‚ â”‚           const response = await client.query\\u003c{ listCustomer: any }\\u003e({ query, variables: { id: customerId } });\\n 39 â”‚ â”‚           \\n 40 â”‚ â”‚           if (!response.data || !response.data.listCustomer?.data?.length) return null;\\n 41 â”‚ â”‚           const customer = response.data.listCustomer.data[0];\\n 42 â”‚ â”‚   \\n 43 â”‚ â”‚           // Ensure tags handles both objects (if expanded) or strings\\n 44 â”‚ â”‚           // Based on Customer schema, tags is List of Strings? \\n 45 â”‚ â”‚           // Introspection showed tags: [String] (implied by no ofType fields usually, or List of Scalar)\\n 46 â”‚ â”‚           // Wait, introspection customer_fields.json line 301 says: type: { name: null, kind: LIST }.\\n 47 â”‚ â”‚           // And line 251 priceListRules kind: LIST.\\n 48 â”‚ â”‚           // Usually tags are strings.\\n 49 â”‚ â”‚           \\n 50 â”‚ â”‚           // Debug safe check\\n 51 â”‚ â”‚           const rawTags = customer.tags || [];\\n 52 â”‚ â”‚           const tags = rawTags.map((t: any) =\\u003e typeof t === 'string' ? t : t.name || '');\\n 53 â”‚ â”‚   \\n 54 â”‚ â”‚           return parseTags(customer.id, tags);\\n 55 â”‚ â”‚       } catch (e: any) {\\n 56 â”‚ â”‚           console.error(\\\"getLoyaltyProfile Error:\\\", e.message);\\n 57 â”‚ â”‚           throw e;\\n 58 â”‚ â”‚       }\\n 59 â”‚ â”‚   }\\n 60 â”‚ â”‚   \\n 61 â”‚ â”‚   export async function updateLoyaltyBalance(\\n 62 â”‚ â”‚       client: ikasAdminGraphQLAPIClient\\u003cany\\u003e,\\n 63 â”‚ â”‚       customerId: string,\\n 64 â”‚ â”‚       delta: number,\\n 65 â”‚ â”‚       newTier?: string\\n 66 â”‚ â”‚   ): Promise\\u003cLoyaltyProfile | null\\u003e {\\n 67 â”‚ â”‚       // 1. Get current profile to know current tags\\n 68 â”‚ â”‚       const currentProfile = await getLoyaltyProfile(client, customerId);\\n 69 â”‚ â”‚       if (!currentProfile) throw new Error('Customer not found');\\n 70 â”‚ â”‚   \\n 71 â”‚ â”‚       const newBalance = currentProfile.pointsBalance + delta;\\n 72 â”‚ â”‚       \\n 73 â”‚ â”‚       // 2. Prepare tags to remove (old values) and add (new values)\\n 74 â”‚ â”‚       // Since we don't have atomic \\\"set tags\\\", we likely use updateCustomerTag or updateCustomer.\\n 75 â”‚ â”‚       // updateCustomerTag likely adds/removes?\\n 76 â”‚ â”‚       // Let's use updateCustomer with \\\"tags\\\" field if it behaves as REPLACE? \\n 77 â”‚ â”‚       // Or we should verify how to update tags.\\n 78 â”‚ â”‚       // Most Shopify-like APIs replace the tags list if provided in updateCustomer.\\n 79 â”‚ â”‚       \\n 80 â”‚ â”‚       // We will assume UPDATE replaces the list or we need better Mutation.\\n 81 â”‚ â”‚       // Using updateCustomerTag mutation?\\n 82 â”‚ â”‚       \\n 83 â”‚ â”‚       // Let's use updateCustomer(input: { id, tags: [...] })\\n 84 â”‚ â”‚       \\n 85 â”‚ â”‚       const tagsToRemove = [\\n 86 â”‚ â”œâ”€â–¶         `${ TAG_PREFIX_POINTS }${ currentProfile.pointsBalance } `,\\n    Â· â•°â”€â”€â”€         â”€\\n    Â· â•°â”€â”€â”€â”€ This is the expression part of an expression statement\\n 87 â”‚             `${ TAG_PREFIX_TIER }${ currentProfile.tier } `\\n 88 â”‚         ];\\n 88 â”‚         \\r\\n    â•°â”€â”€â”€â”€\\n\\n\\nCaused by:\\n    Syntax Error\",\"stack\":\"ModuleBuildError: Module build failed (from ./node_modules/next/dist/build/webpack/loaders/next-swc-loader.js):\\nError:   \\u001b[31mÃ—\\u001b[0m Expected ';', '}' or \\u003ceof\\u003e\\n    â•­â”€[\\u001b[36;1;4mC:\\\\Users\\\\Administrator\\\\Desktop\\\\Ä°kas\\\\my-admin-app\\\\src\\\\lib\\\\loyalty\\\\attributes.ts\\u001b[0m:1:1]\\n \\u001b[2m 1\\u001b[0m â”‚ \\u001b[35;1mâ•­\\u001b[0m\\u001b[35;1mâ”€\\u001b[0m\\u001b[35;1mâ–¶\\u001b[0m ```typescript\\n \\u001b[2m 2\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   import { ikasAdminGraphQLAPIClient } from '../ikas-client/generated/graphql';\\n \\u001b[2m 3\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   import { GET_CUSTOMER_LOYALTY_DATA, UPDATE_CUSTOMER_TAGS } from '../graphql/loyalty';\\n \\u001b[2m 4\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   import { LoyaltyProfile } from './types';\\n \\u001b[2m 5\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   \\n \\u001b[2m 6\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   // Tag Prefixes\\n \\u001b[2m 7\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   const TAG_PREFIX_POINTS = \\\"Loyalty:Points:\\\";\\n \\u001b[2m 8\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   const TAG_PREFIX_TIER = \\\"Loyalty:Tier:\\\";\\n \\u001b[2m 9\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   \\n \\u001b[2m10\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   function parseTags(customerId: string, tags: string[]): LoyaltyProfile {\\n \\u001b[2m11\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       let points = 0;\\n \\u001b[2m12\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       let tier = 'Standard';\\n \\u001b[2m13\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   \\n \\u001b[2m14\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       for (const tag of tags) {\\n \\u001b[2m15\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           if (tag.startsWith(TAG_PREFIX_POINTS)) {\\n \\u001b[2m16\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m               points = parseInt(tag.replace(TAG_PREFIX_POINTS, ''), 10) || 0;\\n \\u001b[2m17\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           } else if (tag.startsWith(TAG_PREFIX_TIER)) {\\n \\u001b[2m18\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m               tier = tag.replace(TAG_PREFIX_TIER, '');\\n \\u001b[2m19\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           }\\n \\u001b[2m20\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       }\\n \\u001b[2m21\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   \\n \\u001b[2m22\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       return {\\n \\u001b[2m23\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           customerId,\\n \\u001b[2m24\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           pointsBalance: points,\\n \\u001b[2m25\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           tier: tier as LoyaltyProfile['tier'],\\n \\u001b[2m26\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           lifetimePoints: 0, // Not storing lifetime in tags for simplicity initially\\n \\u001b[2m27\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           referralCode: undefined, // Skipping\\n \\u001b[2m28\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           pointsExpirationDate: undefined,\\n \\u001b[2m29\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       };\\n \\u001b[2m30\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   }\\n \\u001b[2m31\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   \\n \\u001b[2m32\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   export async function getLoyaltyProfile(\\n \\u001b[2m33\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       client: ikasAdminGraphQLAPIClient\\u003cany\\u003e,\\n \\u001b[2m34\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       customerId: string\\n \\u001b[2m35\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   ): Promise\\u003cLoyaltyProfile | null\\u003e {\\n \\u001b[2m36\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       const query = GET_CUSTOMER_LOYALTY_DATA;\\n \\u001b[2m37\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       try {\\n \\u001b[2m38\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           const response = await client.query\\u003c{ listCustomer: any }\\u003e({ query, variables: { id: customerId } });\\n \\u001b[2m39\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           \\n \\u001b[2m40\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           if (!response.data || !response.data.listCustomer?.data?.length) return null;\\n \\u001b[2m41\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           const customer = response.data.listCustomer.data[0];\\n \\u001b[2m42\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   \\n \\u001b[2m43\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           // Ensure tags handles both objects (if expanded) or strings\\n \\u001b[2m44\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           // Based on Customer schema, tags is List of Strings? \\n \\u001b[2m45\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           // Introspection showed tags: [String] (implied by no ofType fields usually, or List of Scalar)\\n \\u001b[2m46\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           // Wait, introspection customer_fields.json line 301 says: type: { name: null, kind: LIST }.\\n \\u001b[2m47\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           // And line 251 priceListRules kind: LIST.\\n \\u001b[2m48\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           // Usually tags are strings.\\n \\u001b[2m49\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           \\n \\u001b[2m50\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           // Debug safe check\\n \\u001b[2m51\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           const rawTags = customer.tags || [];\\n \\u001b[2m52\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           const tags = rawTags.map((t: any) =\\u003e typeof t === 'string' ? t : t.name || '');\\n \\u001b[2m53\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   \\n \\u001b[2m54\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           return parseTags(customer.id, tags);\\n \\u001b[2m55\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       } catch (e: any) {\\n \\u001b[2m56\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           console.error(\\\"getLoyaltyProfile Error:\\\", e.message);\\n \\u001b[2m57\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m           throw e;\\n \\u001b[2m58\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       }\\n \\u001b[2m59\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   }\\n \\u001b[2m60\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   \\n \\u001b[2m61\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   export async function updateLoyaltyBalance(\\n \\u001b[2m62\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       client: ikasAdminGraphQLAPIClient\\u003cany\\u003e,\\n \\u001b[2m63\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       customerId: string,\\n \\u001b[2m64\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       delta: number,\\n \\u001b[2m65\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       newTier?: string\\n \\u001b[2m66\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   ): Promise\\u003cLoyaltyProfile | null\\u003e {\\n \\u001b[2m67\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       // 1. Get current profile to know current tags\\n \\u001b[2m68\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       const currentProfile = await getLoyaltyProfile(client, customerId);\\n \\u001b[2m69\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       if (!currentProfile) throw new Error('Customer not found');\\n \\u001b[2m70\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m   \\n \\u001b[2m71\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       const newBalance = currentProfile.pointsBalance + delta;\\n \\u001b[2m72\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       \\n \\u001b[2m73\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       // 2. Prepare tags to remove (old values) and add (new values)\\n \\u001b[2m74\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       // Since we don't have atomic \\\"set tags\\\", we likely use updateCustomerTag or updateCustomer.\\n \\u001b[2m75\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       // updateCustomerTag likely adds/removes?\\n \\u001b[2m76\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       // Let's use updateCustomer with \\\"tags\\\" field if it behaves as REPLACE? \\n \\u001b[2m77\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       // Or we should verify how to update tags.\\n \\u001b[2m78\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       // Most Shopify-like APIs replace the tags list if provided in updateCustomer.\\n \\u001b[2m79\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       \\n \\u001b[2m80\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       // We will assume UPDATE replaces the list or we need better Mutation.\\n \\u001b[2m81\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       // Using updateCustomerTag mutation?\\n \\u001b[2m82\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       \\n \\u001b[2m83\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       // Let's use updateCustomer(input: { id, tags: [...] })\\n \\u001b[2m84\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       \\n \\u001b[2m85\\u001b[0m â”‚ \\u001b[35;1mâ”‚\\u001b[0m       const tagsToRemove = [\\n \\u001b[2m86\\u001b[0m â”‚ \\u001b[35;1mâ”œ\\u001b[0m\\u001b[35;1mâ”€\\u001b[0m\\u001b[35;1mâ–¶\\u001b[0m         `${ TAG_PREFIX_POINTS }${ currentProfile.pointsBalance } `,\\n    Â· \\u001b[35;1mâ•°\\u001b[0m\\u001b[35;1mâ”€â”€â”€\\u001b[0m\\u001b[33;1m         â”€\\u001b[0m\\n    Â· \\u001b[35;1mâ•°\\u001b[0m\\u001b[35;1mâ”€â”€â”€\\u001b[0m\\u001b[35;1mâ”€\\u001b[0m \\u001b[35;1mThis is the expression part of an expression statement\\u001b[0m\\n \\u001b[2m87\\u001b[0m â”‚             `${ TAG_PREFIX_TIER }${ currentProfile.tier } `\\n \\u001b[2m88\\u001b[0m â”‚         ];\\n \\u001b[2m88\\u001b[0m â”‚         \\r\\n    â•°â”€â”€â”€â”€\\n\\n\\nCaused by:\\n    Syntax Error\\n    at processResult (C:\\\\Users\\\\Administrator\\\\Desktop\\\\Ä°kas\\\\my-admin-app\\\\node_modules\\\\next\\\\dist\\\\compiled\\\\webpack\\\\bundle5.js:29:407111)\\n    at C:\\\\Users\\\\Administrator\\\\Desktop\\\\Ä°kas\\\\my-admin-app\\\\node_modules\\\\next\\\\dist\\\\compiled\\\\webpack\\\\bundle5.js:29:408906\\n    at C:\\\\Users\\\\Administrator\\\\Desktop\\\\Ä°kas\\\\my-admin-app\\\\node_modules\\\\next\\\\dist\\\\compiled\\\\loader-runner\\\\LoaderRunner.js:1:8645\\n    at C:\\\\Users\\\\Administrator\\\\Desktop\\\\Ä°kas\\\\my-admin-app\\\\node_modules\\\\next\\\\dist\\\\compiled\\\\loader-runner\\\\LoaderRunner.js:1:5019\\n    at r.callback (C:\\\\Users\\\\Administrator\\\\Desktop\\\\Ä°kas\\\\my-admin-app\\\\node_modules\\\\next\\\\dist\\\\compiled\\\\loader-runner\\\\LoaderRunner.js:1:4039)\"},\"gip\":true,\"scriptLoader\":[]}</script></body></html>",
  "message": "Request failed with status code 500"
}
ğŸš€ Starting Webhook Simulation...
ğŸ”‘ Fetching auth tokens...
ğŸ‘¤ Fetching customers...
ğŸ‘¤ Simulating order for: Loyalty (4446e914-b636-4601-85e1-f9dec6635b7e)
ğŸ” Generated Signature: HLwhM7mmPs...
ğŸ“¡ Sending webhook request...
âŒ Webhook Request Failed: {
  "success": false,
  "status": 500,
  "data": {
    "error": "Customer not found"
  },
  "message": "Request failed with status code 500"
}
ğŸš€ Starting Webhook Simulation...
ğŸ”‘ Fetching auth tokens...
ğŸ‘¤ Fetching customers...
ğŸ‘¤ Simulating order for: Loyalty (4446e914-b636-4601-85e1-f9dec6635b7e)
ğŸ” Generated Signature: cWkM1kgwhD...
ğŸ“¡ Sending webhook request...
âŒ Webhook Request Failed: {
  "success": false,
  "status": 500,
  "data": {
    "error": "Customer not found"
  },
  "message": "Request failed with status code 500"
}
ğŸš€ Starting Webhook Simulation...
ğŸ”‘ Fetching auth tokens...
ğŸ‘¤ Fetching customers...
ğŸ‘¤ Simulating order for: Loyalty (4446e914-b636-4601-85e1-f9dec6635b7e)
ğŸ” Generated Signature: GI5Fvv28uq...
ğŸ“¡ Sending webhook request...
âŒ Webhook Request Failed: {
  "success": false,
  "status": 500,
  "data": {
    "error": "Failed to update tags"
  },
  "message": "Request failed with status code 500"
}
ğŸš€ Starting Webhook Simulation...
ğŸ”‘ Fetching auth tokens...
ğŸ‘¤ Fetching customers...
ğŸ‘¤ Simulating order for: Loyalty (4446e914-b636-4601-85e1-f9dec6635b7e)
ğŸ” Generated Signature: muSwQ6GQxr...
ğŸ“¡ Sending webhook request...
âŒ Webhook Request Failed: {
  "success": false,
  "status": 500,
  "data": {
    "error": "Failed to update tags"
  },
  "message": "Request failed with status code 500"
}
ğŸš€ Starting Webhook Simulation...
ğŸ”‘ Fetching auth tokens...
ğŸ‘¤ Fetching customers...
ğŸ‘¤ Simulating order for: Loyalty (4446e914-b636-4601-85e1-f9dec6635b7e)
ğŸ” Generated Signature: sFc2AcFNBt...
ğŸ“¡ Sending webhook request...
âŒ Webhook Request Failed: {
  "success": false,
  "status": 500,
  "data": {
    "error": "tag.startsWith is not a function"
  },
  "message": "Request failed with status code 500"
}
ğŸš€ Starting Webhook Simulation...
ğŸ”‘ Fetching auth tokens...
ğŸ‘¤ Fetching customers...
ğŸ‘¤ Simulating order for: Loyalty (4446e914-b636-4601-85e1-f9dec6635b7e)
ğŸ” Generated Signature: YFx96aD/32...
ğŸ“¡ Sending webhook request...
âŒ Webhook Request Failed: {
  "success": false,
  "status": 500,
  "data": {
    "error": "tag.startsWith is not a function"
  },
  "message": "Request failed with status code 500"
}
ğŸš€ Starting Webhook Simulation...
ğŸ”‘ Fetching auth tokens...
ğŸ‘¤ Fetching customers...
ğŸ‘¤ Simulating order for: Loyalty (4446e914-b636-4601-85e1-f9dec6635b7e)
ğŸ” Generated Signature: aSB+RvcVWq...
ğŸ“¡ Sending webhook request...
âœ… Webhook Response: 200 OK
ğŸ“¦ Response Data: {"success":true,"pointsEarned":200}
ğŸ‰ SUCCESS: Points calculated and awarded correctly!
